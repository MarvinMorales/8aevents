<html>
    <head>
        <link rel="stylesheet" href="main.css">
        <link rel="shortcut icon" type="image/x-icon" href="./images/logo.ico">
        <title>HLS Converter | 8aevents</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Condensed&display=swap" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js"></script>
        <script src="eel.js"></script>
    </head>
    <body>
        <section class="container">
            <input type="text" id="ruta" class="barra" placeholder="Ninguna ruta establecida...!" value=""/>
            <label class="check">Solicitar Autenticacion <input id="c" type="checkbox"/></label>
            <button id="button" class="looker">Iniciar conversion</button>
            <p id="response"></p>
        </section>
        <div class="bott"></div>
    </body>
    <script>
            const startConversion = async (ruta, _check) => {
                let response = await eel.processToUploadFiles(ruta, _check)();
                console.log(response)
                if (!response.hasOwnProperty('code')) window.close();
                else document.getElementById('response').innerHTML = `Codigo de seguridad: ${response.secureCode}`;
            }

            document.getElementById('button').addEventListener('click', () => {
                if (document.getElementById('ruta').value !== "") {
                    const ruta = document.getElementById('ruta').value;
                    document.getElementById('response').innerHTML = "Uploading project..."
                    var _check = document.getElementById('c').checked ? true : false;
                    startConversion(ruta, _check);
                } else alert("Debes agregar la ruta del proyecto!");
            })
    </script>
</html>